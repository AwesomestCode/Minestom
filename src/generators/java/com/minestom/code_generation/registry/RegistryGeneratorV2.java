package com.minestom.code_generation.registry;

import com.minestom.code_generation.MinestomCodeGenerator;
import com.squareup.javapoet.ClassName;
import com.squareup.javapoet.JavaFile;
import com.squareup.javapoet.TypeSpec;
import org.jetbrains.annotations.Nullable;

import javax.lang.model.element.Modifier;
import java.io.File;
import java.util.Collections;
import java.util.Objects;

public class RegistryGeneratorV2 extends MinestomCodeGenerator {
    private final File outputFolder;

    public RegistryGeneratorV2() {
        this(null);
    }

    public RegistryGeneratorV2(@Nullable File outputFolder) {
        this.outputFolder = Objects.requireNonNullElse(outputFolder, DEFAULT_OUTPUT_FOLDER);
    }

    @Override
    public void generate() {
        ClassName registryClassName = ClassName.get("net.minestom.server.registry", "Registry");

        TypeSpec.Builder registriesClass = TypeSpec.interfaceBuilder(registryClassName)
                .addModifiers(Modifier.PUBLIC)
                .addJavadoc("AUTOGENERATED");

        writeFiles(
                Collections.singletonList(
                        JavaFile.builder("net.minestom.server.registry", registriesClass.build()).build()
                ),
                outputFolder
        );
    }
}
